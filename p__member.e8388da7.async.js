(self.webpackChunk=self.webpackChunk||[]).push([[684],{8498:function(ee,Z,r){"use strict";r.r(Z),r.d(Z,{default:function(){return Y}});var B=r(8870),ae=r(57663),I=r(71577),se=r(63185),N=r(9676),re=r(34792),T=r(48086),m=r(3182),D=r(2824),U=r(94043),d=r.n(U),S=r(67294),A=r(86627),$=r(80853),l=r(21010),k=function(){var j=(0,m.Z)(d().mark(function o(f,h){return d().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,l.WY)("/api/user/relationship",(0,B.Z)({method:"post",data:f,headers:{"Content-Type":"application/json"}},h||{})));case 1:case"end":return i.stop()}},o)}));return function(f,h){return j.apply(this,arguments)}}(),z=function(){var j=(0,m.Z)(d().mark(function o(f,h){return d().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,l.WY)("/api/user/adminlist",(0,B.Z)({method:"POST",data:f,headers:{"Content-Type":"application/json"}},h||{})));case 1:case"end":return i.stop()}},o)}));return function(f,h){return j.apply(this,arguments)}}(),w=r(19228),R=r(37476),s=r(85893),O=function(){var o=(0,l.YB)(),f=(0,S.useRef)(),h=(0,l.tT)("@@initialState"),y=h.initialState,i=h.setInitialState,b=(y==null?void 0:y.currentUser)||{},K=(0,S.useState)({totalCount:0,totalUsers:0}),H=(0,D.Z)(K,2),W=H[0],G=H[1],J=(0,S.useState)(!1),L=(0,D.Z)(J,2),C=L[0],Q=L[1],V=function(){var g=(0,m.Z)(d().mark(function a(t,p,u){var c,M,x;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.authority===3){e.next=13;break}if(!t.address){e.next=7;break}return e.next=4,k({address:t.address,page:t.current,level:1,loginAddress:b.address,isExactlyMatch:C});case 4:e.t1=e.sent,e.next=10;break;case 7:return e.next=9,z({address:b.address,page:t.current,isExactlyMatch:C});case 9:e.t1=e.sent;case 10:e.t0=e.t1,e.next=16;break;case 13:return e.next=15,k({address:t.address?t.address:b.address,level:1,loginAddress:b.address,isExactlyMatch:C});case 15:e.t0=e.sent;case 16:if(c=e.t0,M={data:[],current:t.current,pageSize:t.pageSize,total:0,success:!0},c.Code!==0){e.next=32;break}if(!c.Data){e.next=25;break}return e.next=22,(0,w.qc)(c.Data.list,"".concat(t.current,"a1"));case 22:e.t2=e.sent,e.next=26;break;case 25:e.t2=[];case 26:x=e.t2,x.forEach(function(v){v.levelweb=1}),M={data:x,current:t.current,pageSize:t.pageSize,total:c.Data.totalCount,success:!0},G({totalCount:c.Data.totalCount,totalUsers:c.Data.totalUsers}),e.next=33;break;case 32:T.default.error(c.Msg);case 33:return e.abrupt("return",M);case 34:case"end":return e.stop()}},a)}));return function(t,p,u){return g.apply(this,arguments)}}(),P=[{title:(0,s.jsx)(l._H,{id:"pages.member.level",defaultMessage:"\u5C42\u7EA7"}),dataIndex:"levelweb",search:!1,width:60},{title:(0,s.jsx)(l._H,{id:"pages.member.power",defaultMessage:"\u7B97\u529B"}),dataIndex:"power",search:!1,width:60},{title:(0,s.jsx)(l._H,{id:"pages.member.address",defaultMessage:"\u7528\u6237\u5730\u5740"}),dataIndex:"address",copyable:!0,ellipsis:!0,width:200,render:function(a){return(0,s.jsx)("span",{children:a})}},{title:"",key:"direction",hideInTable:!0,dataIndex:"direction",renderFormItem:function(a){return(0,s.jsx)(N.Z,{onChange:function(p){Q(p.target.checked),f.current&&f.current.reloadAndRest()},children:"\u53EA\u663E\u793A\u521B\u59CB\u4EBA\u77FF\u573A\u4F1E\u4E0B\u7B97\u529B"})}},{title:(0,s.jsx)(l._H,{id:"pages.member.teamName",defaultMessage:"\u521B\u5EFA\u56E2\u961F\u540D\u79F0"}),dataIndex:"teamName",search:!1,width:200},{title:(0,s.jsx)(l._H,{id:"pages.member.backpack",defaultMessage:"\u80CC\u5305\u6251\u514B"}),dataIndex:"backpack",search:!1,width:200,render:function(a){return(a==null?void 0:a.length)!==0?(0,s.jsx)(R.Z,{title:o.formatMessage({id:"pages.member.backpack.details",defaultMessage:"\u80CC\u5305\u6251\u514B\u8BE6\u60C5"}),trigger:(0,s.jsxs)(I.Z,{type:"link",style:{padding:0},className:"cus-s",children:[a==null?void 0:a.length,"\u5F20"]}),onFinish:(0,m.Z)(d().mark(function t(){return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",!0);case 1:case"end":return u.stop()}},t)})),children:(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,w._w)(a)}})}):(0,s.jsx)("span",{className:"cus-s",children:"-"})}},{title:(0,s.jsx)(l._H,{id:"pages.member.slot",defaultMessage:"\u5361\u69FD\u6251\u514B"}),dataIndex:"slot",search:!1,width:120,render:function(a){return(a==null?void 0:a.length)!==0?(0,s.jsx)(R.Z,{title:o.formatMessage({id:"pages.member.slot.details",defaultMessage:"\u5361\u69FD\u6251\u514B\u8BE6\u60C5"}),trigger:(0,s.jsxs)(I.Z,{type:"link",style:{padding:0},className:"cus-s",children:[a==null?void 0:a.length,"\u5F20"]}),onFinish:(0,m.Z)(d().mark(function t(){return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",!0);case 1:case"end":return u.stop()}},t)})),children:(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,w._w)(a)}})}):(0,s.jsx)("span",{className:"cus-s",children:"-"})}},{title:(0,s.jsx)(l._H,{id:"pages.member.subordinateCount",defaultMessage:"\u4F1E\u4E0B\u603B\u4EBA\u6570"}),dataIndex:"subordinateCount",search:!1,width:120},{title:(0,s.jsx)(l._H,{id:"pages.member.subordinatePower",defaultMessage:"\u4F1E\u4E0B\u603B\u7B97\u529B"}),dataIndex:"subordinatePower",search:!1,width:120},{title:(0,s.jsx)(l._H,{id:"pages.member.subordinatePoker",defaultMessage:"\u4F1E\u4E0B\u5361\u724C\u603B\u6570"}),dataIndex:"subordinatePoker",search:!1,width:120}],X=function g(a){var t=function(){var p=(0,m.Z)(d().mark(function u(c,M,x){var E,e,v,F;return d().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return E={data:[],success:!0},e={address:a.address,level:1,loginAddress:b.address,isExactlyMatch:C},n.next=4,k(e);case 4:if(v=n.sent,v.Code!==0){n.next=18;break}if(!v.Data.list){n.next=12;break}return n.next=9,(0,w.qc)(v.Data.list,"".concat(a.address,"next").concat(a.level));case 9:n.t0=n.sent,n.next=13;break;case 12:n.t0=[];case 13:F=n.t0,F.forEach(function(_){_.levelweb=a.levelweb+1}),E={data:F,success:!0},n.next=19;break;case 18:T.default.error(v.Msg);case 19:return n.abrupt("return",E);case 20:case"end":return n.stop()}},u)}));return function(c,M,x){return p.apply(this,arguments)}}();return(0,s.jsx)(A.ZP,{columns:P,headerTitle:!1,search:!1,options:!1,pagination:!1,rowKey:"key",showHeader:!1,request:t,expandable:{expandedRowRender:g},rowClassName:"rowClassName".concat(a.levelweb%4)})},q={pageSizeOptions:["20"]};return(0,s.jsx)("div",{className:"memberDome",children:(0,s.jsx)($.ZP,{header:{title:"\u6210\u5458\u5217\u8868"},children:(0,s.jsx)(A.ZP,{columns:P,request:V,actionRef:f,rowKey:"key",pagination:(0,B.Z)({},q),expandable:{expandedRowRender:X},headerTitle:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("span",{style:{marginLeft:"10px"},children:"".concat(o.formatMessage({id:"pages.member.total",defaultMessage:"\u6240\u6709\u4E0B\u7EA7\u603B\u6570"}),":").concat(W.totalUsers)})}),scroll:{scrollToFirstRowOnChange:!0}})})})},Y=O}}]);
