(self.webpackChunk=self.webpackChunk||[]).push([[531],{68408:function(pe){pe.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",title:"title___1-xuF",btn:"btn___3tncb",btnCenter:"btnCenter___2RWiT",bottom:"bottom___18fVj",btnFooter:"btnFooter___f2pYB",login:"login___3F7WU",address:"address___9_Pmc",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx",connecting:"connecting___2wksd"}},7330:function(){},74399:function(pe,oe,e){"use strict";e.r(oe),e.d(oe,{default:function(){return fe}});var _=e(17462),G=e(76772),ie=e(86582),n=e(8870),Ne=e(34792),w=e(48086),R=e(3182),Y=e(2824),Ze=e(94043),u=e.n(Ze),le=e(2603),O=e(67294),he=e(15196),ce=e(5966),C=e(21010),ee=e(85304),Me=e(58533),Se=e(68408),d=e.n(Se),Le=e(57663),ue=e(71577),Pe=e(20228),xe=e(11382),de=e(12322),je=e(3283),Ie=e.n(je),t=e(85893),ye=function(j){var s=(0,C.YB)(),v=(0,C.tT)("@@initialState"),Z=v.initialState,r=v.setInitialState,o=(0,de.Os)(),z=function(a){return o.connect(a)},B=j.setIsLoginMode,E=j.accessMode;(0,O.useEffect)(function(){o.status==="connected"&&(B(!1),r((0,n.Z)((0,n.Z)({},Z),{},{account:o.account})))},[Z,r,B,o.account,o.status]);var K=(0,O.useRef)(new(Ie())(window.ethereum)),V=K.current;(0,O.useEffect)(function(){if(E==="Phone"){U();return}},[E]);var U=function(){var f=(0,R.Z)(u().mark(function a(){var L,I,P;return u().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,g.next=3,V.eth.getAccounts();case 3:L=g.sent,I=localStorage.getItem("walletconnect"),I?(P=JSON.parse(I),r((0,n.Z)((0,n.Z)({},Z),{},{account:P.accounts[0]})),N("walletconnect",P.accounts[0])):(r((0,n.Z)((0,n.Z)({},Z),{},{account:L[0]||""})),N("injected",L[0])),g.next=11;break;case 8:g.prev=8,g.t0=g.catch(0),console.log(g.t0);case 11:case"end":return g.stop()}},a,null,[[0,8]])}));return function(){return f.apply(this,arguments)}}(),N=function(){var f=(0,R.Z)(u().mark(function a(L,I){var P,b,g,c;return u().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(L==="injected")try{P=window.ethereum.networkVersion,P==o.chainId?z("injected"):(b=s.formatMessage({id:"pages.login.mode.url",defaultMessage:"\u8BF7\u5728Metamask\u4E2D\u5C06\u7F51\u7EDC\u8BBE\u7F6E\u4E3A\uFF1ABinance Smart Chain\u3002"}),w.default.error(b))}catch(X){g=s.formatMessage({id:"pages.login.mode.MataMask",defaultMessage:"\u8BF7\u5B89\u88C5MetaMask!"}),w.default.error(g)}else try{c=localStorage.getItem("walletconnect"),c&&E!=="Phone"&&localStorage.removeItem("walletconnect"),z("walletconnect")}catch(X){}case 1:case"end":return J.stop()}},a)}));return function(L,I){return f.apply(this,arguments)}}();return(0,t.jsx)("div",{className:d().btn,children:function(){var f;return(f=o.error)!==null&&f!==void 0&&f.name?(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{children:o.error instanceof de.ce?"Connection error: the user rejected the activation":o.error.name}),(0,t.jsx)("button",{onClick:o.reset(),children:"retry"})]}):o.status==="connecting"?(0,t.jsx)("div",{className:d().connecting,children:(0,t.jsx)(xe.Z,{size:"large",tip:"loading..."})}):(0,t.jsxs)(t.Fragment,{children:[E==="PC"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:d().btnCenter}),(0,t.jsx)("div",{className:d().btnFooter,children:s.formatMessage({id:"pages.login.mode.btnFooter",defaultMessage:"\u8BF7\u9009\u62E9\u767B\u5F55\u65B9\u5F0F"})}),(0,t.jsxs)("div",{className:d().bottom,children:[(0,t.jsx)(ue.Z,{type:"primary",style:{marginRight:"10px"},onClick:function(){N("injected")},children:"MetaMask"}),(0,t.jsx)(ue.Z,{type:"primary",danger:!0,onClick:function(){N("walletconnect")},children:"WalletConnect"})]})]})," ",E==="Phone"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:d().btnCenter}),(0,t.jsxs)("div",{className:d().btnFooter,children:[(0,t.jsx)("span",{children:s.formatMessage({id:"pages.login.mode.phone.tips",defaultMessage:"\u8BF7\u8FDE\u63A5\u5230\u94B1\u5305\u5730\u5740\u540E\uFF0C\u5237\u65B0\u9875\u9762\u91CD\u8BD5"})})," ",(0,t.jsx)("br",{}),(0,t.jsx)(ue.Z,{type:"primary",onClick:function(){U()},children:s.formatMessage({id:"pages.login.mode.phone.click",defaultMessage:"\u70B9\u51FB\u8FDE\u63A5"})})]})]})]})}()})},Ce=ye,D=e(29791),l=function(j){var s=j.setIsRegister,v=(0,C.YB)(),Z=(0,O.useState)(!1),r=(0,Y.Z)(Z,2),o=r[0],z=r[1],B=(0,C.tT)("@@initialState"),E=B.initialState,K=B.setInitialState,V=E==null?void 0:E.account,U=function(){var N=(0,R.Z)(u().mark(function f(a){var L,I,P,b;return u().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(a.confirm===a.password){c.next=4;break}return L=v.formatMessage({id:"pages.login.pwdCom.error",defaultMessage:"\u5BC6\u7801\u4E0E\u786E\u8BA4\u5BC6\u7801\u4E0D\u4E00\u81F4"}),w.default.error(L),c.abrupt("return",!1);case 4:return z(!0),c.prev=5,c.next=8,(0,ee.N$)((0,n.Z)({address:V},a));case 8:if(I=c.sent,I.Code!==0){c.next=14;break}return P=v.formatMessage({id:"pages.register.success",defaultMessage:"\u6CE8\u518C\u6210\u529F, \u7B49\u5F85\u5BA1\u6838"}),w.default.success(P),s(!1),c.abrupt("return");case 14:c.next=20;break;case 16:c.prev=16,c.t0=c.catch(5),b=v.formatMessage({id:"pages.register.error",defaultMessage:"\u6CE8\u518C\u5931\u8D25\uFF01\u8BF7\u91CD\u8BD5"}),w.default.error(b);case 20:z(!1);case 21:case"end":return c.stop()}},f,null,[[5,16]])}));return function(a){return N.apply(this,arguments)}}();return(0,t.jsx)("div",{className:d().login,children:(0,t.jsxs)(he.ZP,{initialValues:{autoLogin:!0},style:{width:"80%"},submitter:{searchConfig:{submitText:v.formatMessage({id:"pages.login.register",defaultMessage:"\u6CE8\u518C"})},render:function(f,a){return a.pop()},submitButtonProps:{loading:o,size:"large",style:{width:"100%"}}},onFinish:function(){var N=(0,R.Z)(u().mark(function f(a){return u().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:U(a);case 1:case"end":return I.stop()}},f)}));return function(f){return N.apply(this,arguments)}}(),children:[(0,t.jsxs)("div",{className:d().address,children:[v.formatMessage({id:"pages.login.address",defaultMessage:"\u5730\u5740\uFF1A"}),V]}),(0,t.jsx)(ce.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,t.jsx)(le.Z,{className:d().prefixIcon})},placeholder:v.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u8F93\u5165\u5BC6\u7801"}),rules:[{required:!0,message:(0,t.jsx)(C._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]}),(0,t.jsx)(ce.Z.Password,{name:"confirm",fieldProps:{size:"large",prefix:(0,t.jsx)(le.Z,{className:d().prefixIcon})},placeholder:v.formatMessage({id:"pages.login.confirm.password.placeholder",defaultMessage:"\u8F93\u5165\u786E\u8BA4\u5BC6\u7801"}),rules:[{required:!0,message:(0,t.jsx)(C._H,{id:"pages.login.confirm.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801\uFF01"})}]})]})})},p=l,i=e(19228),h=e(76605),T=e(49159),H=e(70996),te=function(){var A=(0,R.Z)(u().mark(function j(s,v){return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,C.WY)("/api/user/exist",(0,n.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:s},v||{})));case 1:case"end":return r.stop()}},j)}));return function(s,v){return A.apply(this,arguments)}}(),ae=function(){!C.m8||setTimeout(function(){var j=C.m8.location.query,s=j,v=s.redirect,Z=(0,T.bG)()?JSON.parse((0,T.bG)()):{},r=Z.authority?Z.authority:window.localStorage.getItem("authority"),o="/";(r===1||r===3)&&(o="/member"),r===2&&(o="/examine"),C.m8.push(v||o)},10)},ne=function(j){var s=(0,C.YB)(),v=(0,O.useState)(i.Ph),Z=(0,Y.Z)(v,2),r=Z[0],o=Z[1],z=(0,O.useState)(!0),B=(0,Y.Z)(z,2),E=B[0],K=B[1],V=(0,O.useState)(!1),U=(0,Y.Z)(V,2),N=U[0],f=U[1],a=(0,O.useState)(!1),L=(0,Y.Z)(a,2),I=L[0],P=L[1],b=(0,O.useState)({}),g=(0,Y.Z)(b,2),c=g[0],ge=g[1],J=(0,C.tT)("@@initialState"),X=J.initialState,W=J.setInitialState,M=(0,de.Os)(),Q=function(y){return M.connect(y)},se=(X==null?void 0:X.account)||"",Oe=s.formatMessage({id:"pages.login.title",defaultMessage:Me.Z.title});(0,O.useEffect)(function(){se&&Fe()},[se]);var Fe=function(){var $=(0,R.Z)(u().mark(function y(){var F;return u().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,te({address:se});case 2:F=m.sent,F.Code===1?(w.default.warning(F.Msg),f(!0)):window.localStorage.setItem("authority",F.Data.authority);case 4:case"end":return m.stop()}},y)}));return function(){return $.apply(this,arguments)}}();(0,O.useEffect)(function(){M.status==="disconnected"&&r!=="Phone"&&K(!0)},[r,M.status]),(0,O.useEffect)(function(){K(!0)},[r]);var we=function(){var $=(0,R.Z)(u().mark(function y(F){var S,m,re,ve,me,Ee;return u().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return P(!0),x.prev=1,x.next=4,(0,ee.x4)((0,n.Z)((0,n.Z)({},F),{},{address:se}));case 4:if(S=x.sent,S.Code===1&&ge(S),m=S.Data.authority||"",!(m!==2&&m!==1&&m!==3)){x.next=12;break}return re=s.formatMessage({id:"pages.login.error.authority",defaultMessage:"\u62B1\u6B49\uFF0C\u60A8\u6682\u65E0\u6743\u9650\u8BBF\u95EE\uFF01"}),w.default.info(re),P(!1),x.abrupt("return");case 12:if(S.Code!==0){x.next=21;break}return ve=s.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),me=s.formatMessage({id:"pages.login.success.date",defaultMessage:"BSC\u94FE\u6570\u636E\u83B7\u53D6\u5931\u8D25\uFF0C\u6700\u8FD1\u6570\u636E\u66F4\u65B0\u65F6\u95F4 "}),w.default.success(ve),S.Data.date!==""&&w.default.info(me+S.Data.date),x.next=19,De(S.Data);case 19:return ae(),x.abrupt("return");case 21:x.next=27;break;case 23:x.prev=23,x.t0=x.catch(1),Ee=s.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),w.default.error(Ee);case 27:P(!1);case 28:case"end":return x.stop()}},y,null,[[1,23]])}));return function(F){return $.apply(this,arguments)}}(),De=function(){var $=(0,R.Z)(u().mark(function y(F){var S,m,re,ve,me;return u().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(S=(0,n.Z)((0,n.Z)({},F),{},{address:se})||{},(0,T.ps)(JSON.stringify(S)),(0,T.o4)(S.token),m=[],!Me.Z.isDynamicRoute){k.next=12;break}return ve=((re=i.mE.find(function(x){return x.label===S.authority}))===null||re===void 0?void 0:re.accets)||"",k.next=8,(0,H.B)(ve);case 8:me=k.sent,m=h.Z.concat.apply(h.Z,(0,ie.Z)(me)),k.next=13;break;case 12:m=h.Z;case 13:S&&W((0,n.Z)((0,n.Z)({},X),{},{currentUser:S,menuData:m}));case 14:case"end":return k.stop()}},y)}));return function(F){return $.apply(this,arguments)}}(),Re=c.Code;return(0,t.jsxs)("div",{className:d().container,children:[(0,t.jsx)("div",{className:d().lang,"data-lang":!0,children:C.pD&&(0,t.jsx)(C.pD,{})}),(0,t.jsxs)("div",{className:d().content,children:[(0,t.jsx)("div",{className:d().title,children:Oe}),E&&!N&&(0,t.jsx)(Ce,{accessMode:r,setIsLoginMode:function(y){K(y)}}),!E&&!N&&(0,t.jsx)("div",{className:d().login,children:(0,t.jsxs)(he.ZP,{initialValues:{autoLogin:!0},style:{width:"80%"},submitter:{searchConfig:{submitText:s.formatMessage({id:"pages.login.submit",defaultMessage:"\u767B\u5F55"})},render:function(y,F){return F.pop()},submitButtonProps:{loading:I,size:"large",style:{width:"100%"}}},onFinish:function(){var $=(0,R.Z)(u().mark(function y(F){return u().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:we(F);case 1:case"end":return m.stop()}},y)}));return function(y){return $.apply(this,arguments)}}(),children:[(0,t.jsxs)("div",{className:d().address,children:[s.formatMessage({id:"pages.login.address",defaultMessage:"\u5730\u5740\uFF1A"}),se]}),(0,t.jsx)(ce.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,t.jsx)(le.Z,{className:d().prefixIcon})},placeholder:s.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u8F93\u5165\u5BC6\u7801"}),rules:[{required:!0,message:(0,t.jsx)(C._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]}),Re===1&&(0,t.jsx)(q,{content:s.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u5BC6\u7801\u9519\u8BEF"})})]})}),N&&(0,t.jsx)(p,{setIsRegister:function(y){f(y)}})]}),(0,t.jsx)(D.Z,{})]})},q=function(j){var s=j.content;return(0,t.jsx)(G.Z,{style:{marginBottom:24},message:s,type:"error",showIcon:!0})},fe=ne},76772:function(pe,oe,e){"use strict";e.d(oe,{Z:function(){return Ce}});var _=e(22122),G=e(96156),ie=e(28481),n=e(67294),Ne=e(54549),w=e(15873),R=e(57119),Y=e(68628),Ze=e(73218),u=e(38819),le=e(68855),O=e(40847),he=e(43061),ce=e(60444),C=e(94184),ee=e.n(C),Me=e(65632),Se=e(5467),d=e(6610),Le=e(5991),ue=e(10379),Pe=e(44144),xe=function(D){(0,ue.Z)(p,D);var l=(0,Pe.Z)(p);function p(){var i;return(0,d.Z)(this,p),i=l.apply(this,arguments),i.state={error:void 0,info:{componentStack:""}},i}return(0,Le.Z)(p,[{key:"componentDidCatch",value:function(h,T){this.setState({error:h,info:T})}},{key:"render",value:function(){var h=this.props,T=h.message,H=h.description,te=h.children,ae=this.state,ne=ae.error,q=ae.info,fe=q&&q.componentStack?q.componentStack:null,A=typeof T=="undefined"?(ne||"").toString():T,j=typeof H=="undefined"?fe:H;return ne?n.createElement(Ce,{type:"error",message:A,description:n.createElement("pre",null,j)}):te}}]),p}(n.Component),de=e(96159),je=function(D,l){var p={};for(var i in D)Object.prototype.hasOwnProperty.call(D,i)&&l.indexOf(i)<0&&(p[i]=D[i]);if(D!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,i=Object.getOwnPropertySymbols(D);h<i.length;h++)l.indexOf(i[h])<0&&Object.prototype.propertyIsEnumerable.call(D,i[h])&&(p[i[h]]=D[i[h]]);return p},Ie={success:u.Z,info:O.Z,error:he.Z,warning:le.Z},t={success:w.Z,info:Y.Z,error:Ze.Z,warning:R.Z},ye=function(l){var p,i=l.description,h=l.prefixCls,T=l.message,H=l.banner,te=l.className,ae=te===void 0?"":te,ne=l.style,q=l.onMouseEnter,fe=l.onMouseLeave,A=l.onClick,j=l.afterClose,s=l.showIcon,v=l.closable,Z=l.closeText,r=l.action,o=je(l,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","action"]),z=n.useState(!1),B=(0,ie.Z)(z,2),E=B[0],K=B[1],V=n.useRef(),U=n.useContext(Me.E_),N=U.getPrefixCls,f=U.direction,a=N("alert",h),L=function(M){var Q;K(!0),(Q=o.onClose)===null||Q===void 0||Q.call(o,M)},I=function(){var M=o.type;return M!==void 0?M:H?"warning":"info"},P=Z?!0:v,b=I(),g=function(){var M=o.icon,Q=(i?t:Ie)[b]||null;return M?(0,de.wm)(M,n.createElement("span",{className:"".concat(a,"-icon")},M),function(){return{className:ee()("".concat(a,"-icon"),(0,G.Z)({},M.props.className,M.props.className))}}):n.createElement(Q,{className:"".concat(a,"-icon")})},c=function(){return P?n.createElement("button",{type:"button",onClick:L,className:"".concat(a,"-close-icon"),tabIndex:0},Z?n.createElement("span",{className:"".concat(a,"-close-text")},Z):n.createElement(Ne.Z,null)):null},ge=H&&s===void 0?!0:s,J=ee()(a,"".concat(a,"-").concat(b),(p={},(0,G.Z)(p,"".concat(a,"-with-description"),!!i),(0,G.Z)(p,"".concat(a,"-no-icon"),!ge),(0,G.Z)(p,"".concat(a,"-banner"),!!H),(0,G.Z)(p,"".concat(a,"-rtl"),f==="rtl"),p),ae),X=(0,Se.Z)(o);return n.createElement(ce.Z,{visible:!E,motionName:"".concat(a,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(M){return{maxHeight:M.offsetHeight}},onLeaveEnd:j},function(W){var M=W.className,Q=W.style;return n.createElement("div",(0,_.Z)({ref:V,"data-show":!E,className:ee()(J,M),style:(0,_.Z)((0,_.Z)({},ne),Q),onMouseEnter:q,onMouseLeave:fe,onClick:A,role:"alert"},X),ge?g():null,n.createElement("div",{className:"".concat(a,"-content")},n.createElement("div",{className:"".concat(a,"-message")},T),n.createElement("div",{className:"".concat(a,"-description")},i)),r?n.createElement("div",{className:"".concat(a,"-action")},r):null,c())})};ye.ErrorBoundary=xe;var Ce=ye},17462:function(pe,oe,e){"use strict";var _=e(43673),G=e.n(_),ie=e(7330),n=e.n(ie)},62859:function(){},75304:function(){},46601:function(){},89214:function(){},71922:function(){},2363:function(){},96419:function(){},56353:function(){},69386:function(){},31616:function(){},52361:function(){},94616:function(){},92407:function(){},42923:function(){},40388:function(){},43635:function(){},27208:function(){},83902:function(){},15015:function(){},7852:function(){},57020:function(){},13278:function(){},69973:function(){},84701:function(){},27966:function(){}}]);
