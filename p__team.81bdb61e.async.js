(self.webpackChunk=self.webpackChunk||[]).push([[379],{91710:function(q,I,e){"use strict";e.r(I),e.d(I,{default:function(){return U}});var _=e(71194),H=e(57016),ee=e(66456),L=e(48720),ae=e(57663),j=e(71577),te=e(34792),y=e(48086),g=e(3182),x=e(2824),k=e(94043),u=e.n(k),S=e(67294),O=e(86627),K=e(80853),Z=e(19228),w=e(8870),m=e(21010),P=function(){var C=(0,g.Z)(u().mark(function v(h,f){return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.WY)("/api/teaminfo",(0,w.Z)({method:"post",data:h,headers:{"Content-Type":"application/json"}},f||{})));case 1:case"end":return n.stop()}},v)}));return function(h,f){return C.apply(this,arguments)}}(),F=function(){var C=(0,g.Z)(u().mark(function v(h,f){return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.WY)("api/teammember",(0,w.Z)({method:"post",data:h,headers:{"Content-Type":"application/json"}},f||{})));case 1:case"end":return n.stop()}},v)}));return function(h,f){return C.apply(this,arguments)}}(),Y=e(37476),a=e(85893),z=function(){var v=(0,m.YB)(),h=(0,S.useState)(!1),f=(0,x.Z)(h,2),T=f[0],n=f[1],V=(0,S.useState)(""),B=(0,x.Z)(V,2),W=B[0],G=B[1],Q=(0,S.useState)({data:[],total:0}),A=(0,x.Z)(Q,2),E=A[0],N=A[1],$=(0,m.tT)("@@initialState"),D=$.initialState,re=$.setInitialState,M=(D==null?void 0:D.currentUser)||{},R=function(){var p=(0,g.Z)(u().mark(function t(o,l,r){var s,d,c;return u().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,P({address:M.address});case 2:if(s=i.sent,d={data:[],total:0,success:!0},s.Code!==0){i.next=11;break}return i.next=7,(0,Z.qc)(s.Data.sort((0,Z.qu)("power")),"asda");case 7:c=i.sent,d={data:c,total:c.length,success:!0},i.next=12;break;case 11:y.default.error(s.Msg);case 12:return i.abrupt("return",d);case 13:case"end":return i.stop()}},t)}));return function(o,l,r){return p.apply(this,arguments)}}(),J=[{title:"\u5730\u5740",dataIndex:"address",key:"address"},{title:"\u5361\u69FD\u7EC4\u6570",dataIndex:"slotCount",key:"slotCount",render:function(t,o){return(t==null?void 0:t.length)!==0?(0,a.jsx)(Y.Z,{title:v.formatMessage({id:"pages.team.backpack.details",defaultMessage:"\u5361\u69FD\u8BE6\u60C5"}),trigger:(0,a.jsx)(j.Z,{type:"link",style:{padding:0},className:"cus-s",children:t}),onFinish:(0,g.Z)(u().mark(function l(){return u().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",!0);case 1:case"end":return s.stop()}},l)})),children:o.slot.map(function(l,r){return(0,a.jsxs)("div",{children:["\u7B2C",r+1,"\u7EC4\uFF1A",(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,Z.k5)(l)}})]},r)})}):(0,a.jsx)("span",{className:"cus-s",children:"-"})}},{title:"\u5361\u724C\u603B\u6570\u91CF",dataIndex:"count",key:"count"},{title:"\u603B\u7B97\u529B",dataIndex:"power",key:"power"}],X=[{title:(0,a.jsx)(m._H,{id:"pages.team.teamName",defaultMessage:"\u56E2\u961F\u540D\u79F0"}),dataIndex:"teamName",search:!1},{title:(0,a.jsx)(m._H,{id:"pages.team.power",defaultMessage:"\u603B\u7B97\u529B"}),dataIndex:"power",search:!1,render:function(t){return(0,a.jsx)("span",{children:t})}},{title:(0,a.jsx)(m._H,{id:"pages.team.count",defaultMessage:"\u5361\u724C\u6570\u91CF"}),dataIndex:"count",search:!1,render:function(t){return(0,a.jsxs)("span",{children:[t,"\u5F20"]})}},{title:(0,a.jsx)(m._H,{id:"pages.team.option",defaultMessage:"\u64CD\u4F5C"}),width:200,dataIndex:"option",valueType:"option",render:function(t,o){return[(0,a.jsx)("div",{children:o.enableQueryMember?(0,a.jsx)(j.Z,{type:"primary",onClick:(0,g.Z)(u().mark(function l(){var r,s;return u().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return G(o.teamAddress),c.next=3,F({address:M.address,teamAddress:o.teamAddress,page:1});case 3:r=c.sent,s={data:[],total:0},r.Code==0?r.Data?(s={data:r.Data.member,total:r.Data.totalCount},N(s),n(!0)):y.default.error("\u6682\u65E0\u76F8\u5173\u6570\u636E"):y.default.error(r.Msg);case 6:case"end":return c.stop()}},l)})),children:"\u67E5\u770B\u8BE6\u60C5"}):(0,a.jsx)(j.Z,{disabled:!0,children:"\u67E5\u770B\u8BE6\u60C5"})},"1")]},fixed:"right"}],b=function(){n(!1)};return(0,a.jsxs)(K.ZP,{className:"teamTable",children:[(0,a.jsx)(O.ZP,{columns:X,request:R,rowKey:"key",pagination:!1,scroll:{scrollToFirstRowOnChange:!0},search:!1}),(0,a.jsx)(H.Z,{visible:T,onOk:b,onCancel:b,className:"teamModal",children:(0,a.jsx)(L.Z,{columns:J,dataSource:E.data,rowKey:function(t){return t.address},scroll:{x:"calc(100%)"},pagination:{total:E.total,pageSize:20,showSizeChanger:!1,onChange:function(t){return(0,g.Z)(u().mark(function o(){var l,r;return u().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,F({address:M.address,teamAddress:W,page:t});case 2:l=d.sent,r={data:[],total:0},l.Code==0?(r={data:l.Data.member,total:l.Data.totalCount},N(r),n(!0)):y.default.error(l.Msg);case 5:case"end":return d.stop()}},o)}))()}}})})]})},U=z}}]);
